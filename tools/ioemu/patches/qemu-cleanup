Index: ioemu/hw/vga.c
===================================================================
--- ioemu.orig/hw/vga.c	2006-07-12 11:33:54.853085901 +0100
+++ ioemu/hw/vga.c	2006-07-12 11:35:00.780818943 +0100
@@ -1563,7 +1563,9 @@
 static void vga_save(QEMUFile *f, void *opaque)
 {
     VGAState *s = opaque;
+#ifdef CONFIG_BOCHS_VBE
     int i;
+#endif
 
     qemu_put_be32s(f, &s->latch);
     qemu_put_8s(f, &s->sr_index);
@@ -1604,7 +1606,10 @@
 static int vga_load(QEMUFile *f, void *opaque, int version_id)
 {
     VGAState *s = opaque;
-    int is_vbe, i;
+    int is_vbe;
+#ifdef CONFIG_BOCHS_VBE
+    int i;
+#endif
 
     if (version_id != 1)
         return -EINVAL;
Index: ioemu/vl.c
===================================================================
--- ioemu.orig/vl.c	2006-07-12 11:35:00.708827963 +0100
+++ ioemu/vl.c	2006-07-12 11:35:00.783818568 +0100
@@ -39,6 +39,7 @@
 #include <sys/ioctl.h>
 #include <sys/socket.h>
 #include <netinet/in.h>
+#include <arpa/inet.h>
 #include <dirent.h>
 #include <netdb.h>
 #ifdef _BSD
@@ -4777,7 +4778,9 @@
     QEMU_OPTION_d,
     QEMU_OPTION_hdachs,
     QEMU_OPTION_L,
+#ifdef USE_CODE_COPY
     QEMU_OPTION_no_code_copy,
+#endif
     QEMU_OPTION_k,
     QEMU_OPTION_localtime,
     QEMU_OPTION_cirrusvga,
@@ -4844,7 +4847,9 @@
     { "d", HAS_ARG, QEMU_OPTION_d },
     { "hdachs", HAS_ARG, QEMU_OPTION_hdachs },
     { "L", HAS_ARG, QEMU_OPTION_L },
+#ifdef USE_CODE_COPY
     { "no-code-copy", 0, QEMU_OPTION_no_code_copy },
+#endif
 #ifdef USE_KQEMU
     { "no-kqemu", 0, QEMU_OPTION_no_kqemu },
     { "kernel-kqemu", 0, QEMU_OPTION_kernel_kqemu },
@@ -5274,9 +5279,11 @@
             case QEMU_OPTION_fdb:
                 fd_filename[1] = optarg;
                 break;
+#ifdef USE_CODE_COPY
             case QEMU_OPTION_no_code_copy:
                 code_copy_enabled = 0;
                 break;
+#endif
             case QEMU_OPTION_net:
                 if (nb_net_clients >= MAX_NET_CLIENTS) {
                     fprintf(stderr, "qemu: too many network clients\n");
Index: ioemu/vl.h
===================================================================
--- ioemu.orig/vl.h	2006-07-12 11:35:00.709827838 +0100
+++ ioemu/vl.h	2006-07-12 11:35:00.784818442 +0100
@@ -892,7 +892,7 @@
 	       unsigned long vram_offset, int vram_size, int width, int height);
 
 /* slavio_intctl.c */
-void *slavio_intctl_init();
+void *slavio_intctl_init(void);
 void slavio_intctl_set_cpu(void *opaque, unsigned int cpu, CPUState *env);
 void slavio_pic_info(void *opaque);
 void slavio_irq_info(void *opaque);
